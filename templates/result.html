<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>篩選結果</title>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl5+5hb7O2l5V9z00AZzVzrZCzA+XHRSBQ5J9L1gaK" crossorigin="anonymous"> -->
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='result.css') }}">
</head>

<body>
    <div class="container">
       

        <!-- Content -->
        <main class="main">
            <div class="main-content responsive-wrapper">
                <div class="main_image">
                    <img src="/static/image_page/main.svg" type="Main Image">
                </div>
            </div>
        </main>

        <!-- Sticky header -->
        <header class="header-outer">
          <div class="header-inner responsive-wrapper">
          <!-- <div class="header-logo">
              <img src="/static/image_page/logo.svg" >
          </div> -->
          <nav class="header-navigation">
            <a href="/">首頁</a>
            <a href="#selector" onclick="toggleFilterBox()" id="filter-toggle-btn">顯示篩選框</a>
            <!-- <a href="#">Blog</a>
            <a href="#">Contact</a> -->
            
          </nav>
          </div>
        </header>

        <!-- <div class="colored-section">
            <button class="btn" onclick="window.location.href='/'">回首頁</button>
            <button class="btn" onclick="toggleFilterBox()"  id="filter-toggle-btn">顯示篩選器</button>
        </div> -->

        <div>
          <p>共找到 {{ result_count }} 筆結果符合您的篩選條件。</p>
          <hr class="sep-2" />
        </div>

        <!--篩選-->
          <div class="main" id="selector" >
            <!-- 篩選表單 -->
                <section class="filter-box hidden"  id="filter-box"> 
                    <form id="inputForm" method="POST" action="/result"  onsubmit="return validateForm()">
                      <!-- 第一列：月份、溫度、關鍵字 -->
                      <div class="row">
                          <div class="column">
                            <label for="temperature" class="form-label"></label>
                            <select id="temperature" name="temperature" class="form-select" onchange="toggleMonthRequirement()">
                              <option value="不限" disabled selected>請選擇溫度偏好...</option>
                              <option value="不限" >不限</option> 
                              <option value="cold">寒冷（5°C 以下）</option>
                              <option value="cool">冷（6°C 至 14°C）</option>
                              <option value="moderate">適中（15°C 至 22°C）</option>
                              <option value="warm">熱（23°C 至 30°C）</option>
                              <option value="hot">炎熱（31°C 以上）</option>
                              <input type="hidden" id="selectedCategoriesInput" name="selected_categories" value="{% if selected_categories %}{{ selected_categories|join(',') }}{% endif %}">
                            </select>
                          </div>
                          
                        <div class="column" id="month-container" style="display: none;">
                          <label for="month"></label>
                          <select id="month" name="month" class="form-select">
                            <option value="" disabled selected>請選擇月份...</option>
                            <option value="1">一月</option>
                            <option value="2">二月</option>
                            <option value="3">三月</option>
                            <option value="4">四月</option>
                            <option value="5">五月</option>
                            <option value="6">六月</option>
                            <option value="7">七月</option>
                            <option value="8">八月</option>
                            <option value="9">九月</option>
                            <option value="10">十月</option>
                            <option value="11">十一月</option>
                            <option value="12">十二月</option>
                          </select>
                        </div>
  
                        <div class="column" >
                          <label for="keyword"></label>
                          <input type="text" id="keyword" name="keyword" value="{{ keyword }}" placeholder="請輸入關鍵字...(例如:景點、城市)">
                        </div>
                      </div>
  
                      
                      <!-- 第二列：區域選擇 -->
                      <div class="checkbox-container">
                        <div class="checkbox-wrapper-61">
                          <input type="checkbox" class="check" id="asia" name="continent" value="亞洲" />
                          <label for="asia" class="label">
                            <svg width="45" height="45" viewbox="0 0 95 95">
                              <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                              <g transform="translate(0,-952.36222)">
                                <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1" />
                              </g>
                            </svg>
                            <span>亞洲</span>
                          </label>
                        </div>
                        
                        <div class="checkbox-wrapper-61">
                          <input type="checkbox" class="check" id="europe" name="continent" value="歐洲" />
                          <label for="europe" class="label">
                            <svg width="45" height="45" viewbox="0 0 95 95">
                              <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                              <g transform="translate(0,-952.36222)">
                                <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1" />
                              </g>
                            </svg>
                            <span>歐洲</span>
                          </label>
                        </div>
                        
                        <div class="checkbox-wrapper-61">
                          <input type="checkbox" class="check" id="africa" name="continent" value="非洲" />
                          <label for="africa" class="label">
                            <svg width="45" height="45" viewbox="0 0 95 95">
                              <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                              <g transform="translate(0,-952.36222)">
                                <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1" />
                              </g>
                            </svg>
                            <span>非洲</span>
                          </label>
                        </div>
                        
                        <div class="checkbox-wrapper-61">
                          <input type="checkbox" class="check" id="north-america" name="continent" value="北美洲" />
                          <label for="north-america" class="label">
                            <svg width="45" height="45" viewbox="0 0 95 95">
                              <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                              <g transform="translate(0,-952.36222)">
                                <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1" />
                              </g>
                            </svg>
                            <span>北美洲</span>
                          </label>
                        </div>
                        
                        <div class="checkbox-wrapper-61">
                          <input type="checkbox" class="check" id="south-america" name="continent" value="南美洲" />
                          <label for="south-america" class="label">
                            <svg width="45" height="45" viewbox="0 0 95 95">
                              <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                              <g transform="translate(0,-952.36222)">
                                <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1" />
                              </g>
                            </svg>
                            <span>南美洲</span>
                          </label>
                        </div>
                        
                        <div class="checkbox-wrapper-61">
                          <input type="checkbox" class="check" id="oceania" name="continent" value="大洋洲" />
                          <label for="oceania" class="label">
                            <svg width="45" height="45" viewbox="0 0 95 95">
                              <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                              <g transform="translate(0,-952.36222)">
                                <path d="m 56,963 c -102,122 6,9 7,9 17,-5 -66,69 -38,52 122,-77 -7,14 18,4 29,-11 45,-43 23,-4" stroke="black" stroke-width="3" fill="none" class="path1" />
                              </g>
                            </svg>
                            <span>大洋洲</span>
                          </label>
                        </div>
                      </div>
  
  
                      <!-- 第三列：景點分類 -->
                      <div class="row">
                        <label for="category"></label>
                        <div class="category-selection">
                            
                          <div class="category-option" onclick="toggleSelection(this)">
                            <img src="static/image_page/nature-icon1.png" alt="自然" class="category-icon">
                            <p>自然</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/history-icon1.png" alt="歷史" class="category-icon">
                              <p>歷史</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/art-icon1.png" alt="藝術" class="category-icon">
                              <p>藝術</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/architecture-icon1.png" alt="建築" class="category-icon">
                              <p>建築</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/religion-icon1.png" alt="宗教" class="category-icon">
                              <p>宗教</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/theme-park1.png" alt="樂園" class="category-icon">
                              <p>樂園</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/leisure-icon1.png" alt="休閒" class="category-icon">
                              <p>休閒</p>
                          </div>
                          
                          <div class="category-option" onclick="toggleSelection(this)">
                              <img src="static/image_page/vacation-icon1.png" alt="渡假" class="category-icon">
                              <p>渡假</p>
                          </div>
                            <!-- 隱藏的輸入框 -->
                          <input type="hidden" id="selectedCategoriesInput" name="selected_categories" value="{% if selected_categories %}{{ selected_categories|join(',') }}{% endif %}">
                        </div>
                      </div>
                    <button type="submit">篩選</button>
                    </form>
                </section>
            </div>
        </div>
        
        <!-- result -->
        {% if attractions %}
            <div class="cards-container">
                {% for attraction in attractions %}
                <a href="{{ url_for('detail', city_name=attraction.city_name) }}" class="card">
                    <!-- 卡片圖片容器 -->
                    <div class="card-image-container">
                    <img src="{{ url_for('static', filename='city_image/' + (attraction.city_name or 'default.jpg') + '.jpg') }}" alt="{{ attraction.city_name }} 圖片" class="card__img">
                    </div>
                    
                    <!-- 卡片標題 -->
                    <p class="card-title">{{ attraction.city_name_cht }} ({{ attraction.city_name }})</p>
                    <!-- 卡片描述 -->
                    <!-- <p class="card-des">
                    <strong>國家：</strong>{{ attraction.country_name_cht }} ({{ attraction.country_name }})
                    </p> -->
                </a>              
                {% endfor %}
            </div>
        {% endif %}
        
        
        <footer>
            
        </footer>   
        
        

        <!-- 引入 JavaScript -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script> -->
        <script src="{{ url_for('static', filename='main.js') }}"></script>
        <script src="{{ url_for('static', filename='result.js') }}"></script>
</body>
</html>
